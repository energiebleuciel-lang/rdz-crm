<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="3" skipped="0" tests="21" time="2.257" timestamp="2026-02-09T21:39:46.529091+00:00" hostname="agent-env-269be9e7-d1b7-4f04-83ae-667f60a93ba4"><testcase classname="backend.tests.test_new_billing_features.TestBillingWeekNavigation" name="test_get_current_week" time="0.144" /><testcase classname="backend.tests.test_new_billing_features.TestBillingWeekNavigation" name="test_get_week_billing_with_week_info" time="0.073" /><testcase classname="backend.tests.test_new_billing_features.TestBillingWeekNavigation" name="test_get_week_billing_returns_invoice_status" time="0.047" /><testcase classname="backend.tests.test_new_billing_features.TestBillingWeekNavigation" name="test_mark_week_as_invoiced" time="0.196" /><testcase classname="backend.tests.test_new_billing_features.TestBillingWeekNavigation" name="test_week_navigation_different_weeks" time="0.107" /><testcase classname="backend.tests.test_new_billing_features.TestBillingWeekNavigation" name="test_invalid_week_number" time="0.043" /><testcase classname="backend.tests.test_new_billing_features.TestCommandesPrixUnitaire" name="test_commandes_have_prix_unitaire" time="0.057" /><testcase classname="backend.tests.test_new_billing_features.TestCommandesPrixUnitaire" name="test_update_commande_prix_unitaire" time="0.225" /><testcase classname="backend.tests.test_new_billing_features.TestCommandesPrixUnitaire" name="test_create_commande_with_prix_unitaire" time="0.047"><failure message="assert 400 == 200&#10; +  where 400 = &lt;Response [400]&gt;.status_code">backend/tests/test_new_billing_features.py:243: in test_create_commande_with_prix_unitaire
    assert response.status_code == 200
E   assert 400 == 200
E    +  where 400 = &lt;Response [400]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_new_billing_features.TestAccountsCguPrivacy" name="test_accounts_have_legal_fields" time="0.049" /><testcase classname="backend.tests.test_new_billing_features.TestAccountsCguPrivacy" name="test_create_account_with_legal_texts" time="0.045"><failure message="AssertionError: assert None == 'Article 1 - Test CGU\nCes conditions générales...'&#10; +  where None = &lt;built-in method get of dict object at 0xfbd2e4fdd5c0&gt;('cgu_text')&#10; +    where &lt;built-in method get of dict object at 0xfbd2e4fdd5c0&gt; = {'created_at': '2026-02-09T21:39:47.753387+00:00', 'created_by': '41334f05-717d-44e0-b99e-1440ac26b317', 'crm_id': '19e96529-6cf5-404c-86a6-a02c32d905a2', 'default_tracking_type': 'redirect', ...}.get">backend/tests/test_new_billing_features.py:300: in test_create_account_with_legal_texts
    assert account.get("cgu_text") == account_data["cgu_text"]
E   AssertionError: assert None == 'Article 1 - Test CGU\nCes conditions générales...'
E    +  where None = &lt;built-in method get of dict object at 0xfbd2e4fdd5c0&gt;('cgu_text')
E    +    where &lt;built-in method get of dict object at 0xfbd2e4fdd5c0&gt; = {'created_at': '2026-02-09T21:39:47.753387+00:00', 'created_by': '41334f05-717d-44e0-b99e-1440ac26b317', 'crm_id': '19e96529-6cf5-404c-86a6-a02c32d905a2', 'default_tracking_type': 'redirect', ...}.get</failure></testcase><testcase classname="backend.tests.test_new_billing_features.TestAccountsCguPrivacy" name="test_update_account_legal_texts" time="0.182" /><testcase classname="backend.tests.test_new_billing_features.TestLeadsCrmFilter" name="test_filter_leads_by_crm_id" time="0.094" /><testcase classname="backend.tests.test_new_billing_features.TestLeadsCrmFilter" name="test_leads_filter_returns_correct_crm_leads" time="0.076" /><testcase classname="backend.tests.test_new_billing_features.TestDepartementsStatsCrmFilter" name="test_filter_departements_stats_by_crm" time="0.038"><failure message="AssertionError: assert ('departements' in {'by_departement': {'13': {'ITE': 1, 'PAC': 0, 'PV': 2, 'total': 3}, '33': {'ITE': 0, 'PAC': 0, 'PV': 1, 'total': 1}, '69': {'ITE': 0, 'PAC': 0, 'PV': 2, 'total': 2}, '75': {'ITE': 0, 'PAC': 0, 'PV': 4, 'total': 4}}, 'by_product': {'ITE': 1, 'PAC': 0, 'PV': 9}, 'by_source': {'Direct': {'ITE': 1, 'PAC': 0, 'PV': 9, 'total': 10}}, 'by_status': {'duplicate': 0, 'failed': 1, 'no_crm': 1, 'queued': 0, ...}, ...} or 'stats' in {'by_departement': {'13': {'ITE': 1, 'PAC': 0, 'PV': 2, 'total': 3}, '33': {'ITE': 0, 'PAC': 0, 'PV': 1, 'total': 1}, '69': {'ITE': 0, 'PAC': 0, 'PV': 2, 'total': 2}, '75': {'ITE': 0, 'PAC': 0, 'PV': 4, 'total': 4}}, 'by_product': {'ITE': 1, 'PAC': 0, 'PV': 9}, 'by_source': {'Direct': {'ITE': 1, 'PAC': 0, 'PV': 9, 'total': 10}}, 'by_status': {'duplicate': 0, 'failed': 1, 'no_crm': 1, 'queued': 0, ...}, ...})">backend/tests/test_new_billing_features.py:423: in test_filter_departements_stats_by_crm
    assert "departements" in data or "stats" in data
E   AssertionError: assert ('departements' in {'by_departement': {'13': {'ITE': 1, 'PAC': 0, 'PV': 2, 'total': 3}, '33': {'ITE': 0, 'PAC': 0, 'PV': 1, 'total': 1}, '69': {'ITE': 0, 'PAC': 0, 'PV': 2, 'total': 2}, '75': {'ITE': 0, 'PAC': 0, 'PV': 4, 'total': 4}}, 'by_product': {'ITE': 1, 'PAC': 0, 'PV': 9}, 'by_source': {'Direct': {'ITE': 1, 'PAC': 0, 'PV': 9, 'total': 10}}, 'by_status': {'duplicate': 0, 'failed': 1, 'no_crm': 1, 'queued': 0, ...}, ...} or 'stats' in {'by_departement': {'13': {'ITE': 1, 'PAC': 0, 'PV': 2, 'total': 3}, '33': {'ITE': 0, 'PAC': 0, 'PV': 1, 'total': 1}, '69': {'ITE': 0, 'PAC': 0, 'PV': 2, 'total': 2}, '75': {'ITE': 0, 'PAC': 0, 'PV': 4, 'total': 4}}, 'by_product': {'ITE': 1, 'PAC': 0, 'PV': 9}, 'by_source': {'Direct': {'ITE': 1, 'PAC': 0, 'PV': 9, 'total': 10}}, 'by_status': {'duplicate': 0, 'failed': 1, 'no_crm': 1, 'queued': 0, ...}, ...})</failure></testcase><testcase classname="backend.tests.test_new_billing_features.TestDepartementsStatsCrmFilter" name="test_departements_stats_different_crms" time="0.099" /><testcase classname="backend.tests.test_new_billing_features.TestBriefGenerator" name="test_brief_includes_logos_html" time="0.162" /><testcase classname="backend.tests.test_new_billing_features.TestBriefGenerator" name="test_brief_includes_legal_html" time="0.137" /><testcase classname="backend.tests.test_new_billing_features.TestBriefGenerator" name="test_brief_account_has_legal_info" time="0.134" /><testcase classname="backend.tests.test_new_billing_features.TestBillingCrossCrm" name="test_billing_cross_crm_endpoint" time="0.042" /><testcase classname="backend.tests.test_new_billing_features.TestBillingCrossCrm" name="test_billing_weeks_history" time="0.043" /></testsuite></testsuites>